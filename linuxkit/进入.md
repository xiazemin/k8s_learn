nc -U ~/Library/Containers/com.docker.docker/Data/debug-shell.sock
/ # ^[[23;5R
通过nc -u  udp的方式进入，交互界面上有好多提示符，显示不友好，不支持上下键，所以用stty方式

Linux nc命令用于设置路由器。https://www.runoob.com/linux/linux-comm-nc.html

 stty -echo -icanon && nc -U ~/Library/Containers/com.docker.docker/Data/debug-shell.sock && stty sane

 https://blog.csdn.net/u012140251/article/details/120261763
 https://www.cnblogs.com/jiuhefree/articles/15315855.html


进入以后可以看到支持的命令
 / # ls bin/
arch           ed             link           nice           sleep
ash            egrep          linux32        pidof          stat
base64         false          linux64        ping           stty
bbconfig       fatattr        ln             ping6          su
busybox        fdflush        login          pipe_progress  sync
cat            fgrep          ls             printenv       tar
chgrp          fsync          lzop           ps             touch
chmod          getopt         makemime       pwd            true
chown          grep           mkdir          reformime      umount
cp             gunzip         mknod          rev            uname
date           gzip           mktemp         rm             usleep
dd             hostname       more           rmdir          watch
df             ionice         mount          run-parts      zcat
dmesg          iostat         mountpoint     sed
dnsdomainname  ipcalc         mpstat         setpriv
dumpkmap       kbd_mode       mv             setserial
echo           kill           netstat        sh

/ # ls /usr/local/bin/
diagnosticsd

/ # ls /usr/bin/
[            diff         ipcs         passwd       shred        unlink
[[           dirname      killall      paste        shuf         unlzma
awk          dos2unix     less         pgrep        sort         unlzop
basename     du           logger       pkill        split        unshare
bc           eject        lsof         pmap         strings      unxz
beep         env          lsusb        printf       sum          unzip
blkdiscard   expand       lzcat        pscan        tac          uptime
bunzip2      expr         lzma         pstree       tail         uudecode
bzcat        factor       lzopcat      pwdx         tee          uuencode
bzip2        fallocate    md5sum       readlink     test         vi
cal          find         mesg         realpath     time         vlock
chvt         flock        microcom     renice       timeout      volname
cksum        fold         mkfifo       reset        top          wc
clear        free         mkpasswd     resize       tr           wget
cmp          fuser        nc           runc         traceroute   which
comm         groups       nl           seq          traceroute6  whoami
cpio         hd           nmeter       setkeycodes  truncate     whois
crontab      head         nohup        setsid       tty          xargs
cryptpw      hexdump      nproc        sha1sum      ttysize      xxd
ctr          hostid       nsenter      sha256sum    udhcpc6      xzcat
cut          id           nslookup     sha3sum      unexpand     yes
dc           install      od           sha512sum    uniq
deallocvt    ipcrm        openvt       showkey      unix2dos

可以看到，有wget ，我们就可以下载软件了，我先试下能不能连外网

wget www.baidu.com

显然是可以的

https://mp.weixin.qq.com/s?src=11&timestamp=1637485426&ver=3449&signature=1fhXx4EexOFj*HAW6H00yl0mEsMoXzSjESPnfRRlLkJ82vefgw6i5gWLcb1VNN5nDm44bGgFBQJBpkUf4kjl9GYMHuvsTibg*UEuEWKPBMgW5qggi-Pso8vG-t7gCyOd&new=1

尝试安装git
https://mirrors.edge.kernel.org/pub/software/scm/git/


/ # wget https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz
Connecting to mirrors.edge.kernel.org (147.75.95.133:443)
wget: can't execute 'ssl_client': No such file or directory
wget: error getting response: Connection reset by peer

wget --no-check-certificate https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.9.5.tar.gz
https://blog.csdn.net/dearbaba_8520/article/details/81407957

不行


BusyBox 是一个开源（GPL）项目，提供近 400 个常用命令的简单实现，包括 ls、mv、ln、mkdir、more、ps、gzip、bzip2、tar 和 grep。它还包含了编程语言 awk、流编辑器 sed、文件系统检查工具 fsck、rpm 和 dpkg 软件包管理器，当然还有一个可以方便的访问所有这些命令的 shell（sh）。简而言之，它包含了所有 POSIX 系统需要的基本命令，以执行常见的系统维护任务以及许多用户和管理任务。

事实上，它甚至包含一个 init 命令，可以作为 PID 1 启动，以作为所有其它系统服务的父进程。换句话说，BusyBox 可以作为 systemd、OpenRC、sinit、init 和其他初始化系统的替代品。

BusyBox 非常小。作为一个可执行文件，它不到 1MB


https://linux.cn/article-13840-1.html

https://blog.csdn.net/whatday/article/details/86787385



Docker Desktop 启动后，可以看到两个 sock 文件

$ ls -l /var/run/docker*
lrwxr-xr-x 1 root daemon 69 Oct 20 19:07 /var/run/docker-cli.sock -> /Users/yanbin/Library/Containers/com.docker.docker/Data/docker-cli.sock
lrwxr-xr-x 1 root daemon 35 Oct 20 19:07 /var/run/docker.sock -> /Users/yanbin/.docker/run/docker.sock

后面的 docker 命令就是与这里的 /var/run/docker.sock 文件通信的，比如可以 telnet 一下它

$ telnet /var/run/docker.sock

https://yanbin.blog/docker-desktop-replacement-docker-machine/

https://passingcuriosity.com/2018/surviving-behind-enterprise-proxy/


docker启动时,如果创建了自定义的docker网络:

将容器run在该网络中时,容器访问的localhost不是宿主机的localhost.

1.解决
1.1 启动时该为host网络模式启动
--network host

https://www.cnblogs.com/yang37/p/14687983.html

https://segmentfault.com/a/1190000009288421

https://www.qedev.com/cloud/211221.html

使用 Moby&LinuxKit 编译 Docker For Mac CE

linuxkit run hyperkit -networking=vpnkit -vsock-ports=2376 -disk size=1024M doc

https://www.bianchengquan.com/article/634951.html

在Mac OS的Xhyve引擎之上启动LinuxKit的玩法

安装Xhyve
构建Moby
接下来安装Moby binary：
$ cd linuxkit
定制和构建Linux映像

https://www.sohu.com/a/145137341_610730

https://github.com/linuxkit/linuxkit/blob/master/examples/docker-for-mac.yml

https://www.cnblogs.com/rongfengliang/p/9354092.html

现在快速地查看下这个文件。在没有展开更详尽的介绍之前（那些在LinuxKit git repo 中可以看到的），我们将聚焦在以下要点上——

开始的部分是“基础”镜像，定义了Kernel和Kernel命令行参数；

紧接着，是一些Init所需的 OCI兼容的LinuxKit镜像；在此之后，是Onboot部分，里面描述的是另外一些需要再其他服务启动之前由RunC顺序启动的基础镜像；

再之后就是服务（Services）了，同样是OCI兼容的镜像，由Containerd启动并保持运行状态。

最后，指定构建过程中Moby将要创建的输出文件信息。下面，构建镜像。

https://blog.csdn.net/weixin_34261739/article/details/89050333

/ # wget https://dl-cdn.alpinelinux.org/alpine/v3.9/main/armv7/apk-tools-2.10.6-
r0.apk

https://dl-cdn.alpinelinux.org/alpine/v3.9/main/armv7/

https://www.cnblogs.com/szqmvp/p/7810188.html

arm-linux 交叉编译wget支持openssl, 使wget支持https链接地址下载文
https://blog.csdn.net/Auris/article/details/88776450


http://distfiles.macports.org/openssl/

/ # wget http://distfiles.macports.org/openssl/openssl-1.1.1j.tar.gz
wget: bad address 'distfiles.macports.org'

断开代理，问题解决
/ # wget http://distfiles.macports.org/openssl/openssl-1.1.1j.tar.gz
Connecting to distfiles.macports.org (151.101.230.132:80)
saving to 'openssl-1.1.1j.tar.gz'
openssl-1.1.1j.tar.g 100% |********************************| 9592k  0:00:00 ETA^@
'openssl-1.1.1j.tar.gz' saved

 tar -zxvf openssl-1.1.1j.tar.gz
 / # cd openssl-1.1.1j/
  # ./Configure
env: can't execute 'perl': No such file or directory
